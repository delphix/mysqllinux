{
    "repositoryDefinition": {
        "type": "object",
        "additionalProperties": false,
        "manualrepositoryDiscovery" : true,
        "properties": {
            "name": {
                "type": "string",
                "prettyName": "Name",
                "description": "Displayable Name for the MySQL Binary"
            },
            "version": {
                "type": "string",
                "prettyName": "Version",
                "description": "The version of the MySQL DB binaries"
             },
            "installPath": { 
                "type": "string",
                "prettyName": "Location",
                "description": "This is the path to MySQL executables"
            }
        },
        "nameField": "name",
        "identityFields": ["installPath"]
    },
    "sourceConfigDefinition": {
        "type": "object",
        "ordering": ["dataDir","port","baseDir","dbName"],
        "required": ["dataDir","port","baseDir","dbName"],
        "additionalProperties": false,
        "properties": {
            "dataDir": {
                "type": "string",
                "prettyName": "Data Directory",
                "description": "Full path of the MySQL DB data directory (include the data directory)"
              },
             "port": {
                "type": "string",
                "prettyName": "Port",
                "description": "Port for the MySQL database"
             }, 
             "baseDir": {
                "type": "string",
                "prettyName": "Base Directory",
                "description": "Path of the MySQL Installation, where binaries (/bin) is located "
             },
             "dbName": {
                "type": "string",
                "prettyName": "MySQL Instance Name",
                "description": "Name of the MySQL Instance."
             }
        },
        "nameField": "dbName",
        "identityFields": ["dataDir","port"]
    },
    "virtualSourceDefinition": {
        "type": "object",
        "additionalProperties" : false,
        "ordering": [
           "vdbConn",
           "vdbPass",
           "baseDir",
           "port",
           "serverId",
           "mPath",
           "config_settings_prov"
         ],
        "required": [
           "baseDir",
           "port",
           "serverId",
           "mPath"
         ],
        "properties" : {
         "vdbConn": {
            "type": "string",
            "prettyName": "VDB Connection String",
            "description": "Full connection string for the VDB",
            "default": "-udelphix1 --host=localhost -p"
         },
         "vdbPass": {
            "type": "string",
            "format": "password",
            "prettyName": "VDB Password",
            "description": "Password to use for connection to VDB",
            "default": "delphix"
         },
         "baseDir": {
            "type": "string",
            "prettyName": "BaseDir",
            "description": "Path of the MySQL Installation, where binaries (./bin) exists",
            "default": "/opt/mysql57/mysql57d"
         },
         "port": {
            "type": "string",
            "prettyName": "VDB Port",
            "description": "Port for the MySQL VDB",
            "default": "3308"
         },
         "serverId": {
            "type": "string",
            "prettyName": "VDB Server ID",
            "description": "Server ID for the MySQL VDB",
            "default": "201"
         },
         "config_settings_prov" : {
            "type" : "array",
            "prettyName" : "my.cnf Config Settings",
            "description" : "Custom Database-Level config settings",
            "items": {
               "type": "object",
               "required": ["propertyName","value"],
               "ordering": ["propertyName", "value"],
               "properties": {
                  "propertyName" : {
                     "type" : "string",
                     "prettyName": "Property Name",
                     "pattern": "^$|^[_a-zA-Z0-9]*$",
                     "default": "",
                     "maxLength": 40
                  },
                  "value": {
                     "type": "string",
                     "prettyName": "Value",
                     "pattern": "^$|^[_a-zA-Z0-9]*$",
                     "default": "",
                     "maxLength": 40
                  }
               }
            }
         },
         "mPath": {
            "type": "string",
            "prettyName": "Mount Location",
            "description": "NFS Mount folder for Delphix",
            "default": "/home/mysql/delphix/mount3"
         }
      }
    },
    "linkedSourceDefinition": {
        "type": "object",
        "additionalProperties" : false,
        "required": [
          "dSourceType",
          "serverId",
          "stagingPort",
          "mountPath",
          "stagingip"
        ],
        "ordering" : [
          "dSourceType",
          "stagingUser",
          "stagingip",
          "stagingPass",
          "serverId",
          "stagingPort",
          "mountPath",
          "backupPath",
          "sourceUser",
          "sourceip",
          "sourcePass",
          "logSync",
          "replicationUser",
          "replicationPass",
          "config_settings_prov"
        ],
        "properties" : {
          "dSourceType": {
            "type": "string",
            "prettyName": "dSource Type",
            "description": "",
            "enum": ["Manual Backup Ingestion", "Replication","Simple (Tablespace Backup)"],
            "default": "Replication"
          },
          "backupPath": {
             "type": "string",
             "prettyName": "Optional: Full path (including filename) to MySQL backup.",
             "description": "* Leave blank if Delphix is taking backups",
             "default": ""
          },
          "stagingip": {
            "type": "string",
            "prettyName": "MySQL Staging Server IP address",
            "description": "HostName or IP address of the staging server",
            "default": "localhost"
         },
         "sourceip": {
            "type": "string",
            "prettyName": "Source DB Host IP address",
            "description": "* Required if using Replication Method",
            "default": "neomysqlsrc.dlpxdc.co"
         },
          "mountPath": {
            "type": "string",
            "prettyName": "Mount Location on Staging Host",
            "description": "NFS mount directory on the Staging Host",
            "default": "/home/mysql/delphix/mount"
         },
          "sourceUser": {
             "type": "string",
             "prettyName": "Source DB User",
             "description": "Source DB user account for taking backups",
             "default": "delphix1"
          },
          "sourcePass": {
             "type": "string",
             "format": "password",
             "prettyName": "Optional:Source Connection Password",
             "description": "* Required if Delphix is taking backups",
             "default": "delphix"
          },
          "logSync": {
             "default": true,
             "prettyName": "LogSync",
             "type": "boolean",
             "description": "Enable Replication from Source to Staging DB"
          },
          "replicationUser": {
             "type": "string",
             "prettyName": "Replication User",
             "description": "MySQL Replication User Name",
             "default": "delphixdb"
          },
          "replicationPass": {
             "type": "string",
             "format": "password",
             "prettyName": "Replication Password",
             "description": "MySQL Replication User Password",
             "default": "delphix"
          },
          "stagingUser": {
             "type": "string",
             "prettyName": "Staging Host User Name",
             "description": "MySQL Staging Host User Name",
             "default": "root"
          },
          "stagingPass": {
             "type": "string",
             "format": "password",
             "prettyName": "Staging Host Password",
             "description": "Staging Host password",
             "default": "***REMOVED***"
          },
          "serverId": {
             "type": "string",
             "prettyName": "Staging DB Server ID",
             "description": "ServerID for the Stagine DB. Must be different from Source DB Server ID",
             "default": "102"
          },
          "stagingPort": {
             "type": "string",
             "prettyName": "Staging DB Port",
             "description": "Staging Database Port",
             "default": "3307"
          },
          "config_settings_prov" : {
            "type": "array",
            "prettyName": "Optional Configuration",
            "description": "",
            "items": {
              "type": "object",
              "required": [
                "bucketName"
              ],
              "ordering": [
                "bucketName",
                "bucketLoc"
              ],
              "properties": {
                "bucketName": {
                  "type": "string",
                  "prettyName": "Bucket Name",
                  "default": "",
                  "maxLength": 40
                },
                "bucketLoc": {
                    "type": "string",
                    "prettyName": "Bucket Location",
                    "default": "",
                    "maxLength": 40
                  }
              }
            }
          }
        }
      },
    "snapshotDefinition": {
        "type" : "object",
        "additionalProperties" : false,
        "properties" : {
         "snapshotId": {
            "type": "string",
            "prettyName": "Snapshot ID",
            "description": "A unique ID for this snapshot"
         },
         "snapHost": {
            "type": "string",
            "prettyName": "Snapshot Host",
            "description": ""
         },
         "snapPort": {
            "type": "string",
            "prettyName": "Snapshot Port",
            "description": ""
         },
         "snapDataDir": {
            "type": "string",
            "prettyName": "Snapshot --datadir",
            "description": ""
         },
         "snapBaseDir": {
            "type": "string",
            "prettyName": "Snapshot --basedir",
            "description": ""
         },
         "snapConn": {
            "type": "string",
            "prettyName": "Snapshot Connection String",
            "description": ""
         },
         "snapPass": {
            "type": "string",
            "format": "password",
            "prettyName": "Snapshot Connection Password",
            "description": ""
         },
         "snapBackupPath": {
            "type": "string",
            "prettyName": "Snapshot Backup Path",
            "description": ""
         },
         "snapTime": {
            "type": "string",
            "prettyName": "Snapshot Timestamp",
            "description": "Time when the snapshot was taken."
         }
      }
    }
}
